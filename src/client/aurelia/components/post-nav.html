<template>
  <require from="components/cover.html"></require>
  <require from="styles/post-nav.styl"></require>

  <main class="carousel container"
    css="background: radial-gradient(ellipse at top, ${posts.data[selected].palette.primary}, transparent);"
  >
    <div class="mid-left content">
      <a if.bind="selected > 0" class="button" href="" click.delegate="slideLeft()">
        <i class="fal fa-chevron-left"></i>
      </a>
    </div>
    <div class="mid-right content">
      <a if.bind="selected < posts.data.length - 1" class="button" href="" click.delegate="slideRight()">
        <i class="fal fa-chevron-right"></i>
      </a>
    </div>
    <div if.bind="pick" class="top-right content">
      <a class="button" href="#posts/${pick}">
        <i class="fal fa-bars"></i>
      </a>
    </div>
    <div if.bind="pick && player.playlist" class="top-left content">
      <a class="button" href="#posts/${player.playlist._id}">
        <i class="fal fa-music"></i>
      </a>
    </div>
    <section class="cover-section">
      <ul class="carousel-list">
        <li repeat.for="post of posts.data"
          class="carousel-item ${selected === $index ? 'selected' : ''}"
          css="margin-left: ${100 * ($index - selected)}vw;"
        >
          <cover post.bind="post" link="true"></cover>
        </li>
      </ul>
    </section>
    <footer class="categories content">
      <ul>
        <li repeat.for="c of categories.data" class="${c._id == category ? 'active' : ''}">
          <a class="button" href="" click.delegate="toggleCategory(c)">${c.name}</a>
        </li>
      </ul>
    </footer>
  </main>
</template>