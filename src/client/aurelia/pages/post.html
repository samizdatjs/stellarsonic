<template>
  <require from="components/post-nav"></require>
  <require from="components/color"></require>
  <require from="components/showdown"></require>
  <require from="components/player"></require>
  <require from="components/tracklist"></require>
  <require from="styles/app.styl"></require>
  <require from="styles/post.styl"></require>
  <require from="styles/article.styl"></require>
  <require from="styles/volume.styl"></require>

  <div class="au-animate post" color-bg.bind="post.palette.dark">
    <main class="container ${showNav ? 'hidden' : ''}"
      css="background: radial-gradient(ellipse at top, ${post.palette.primary}, transparent);"
    >
      <div class="top-right content">
        <a class="button" route-href="route: home; params.bind: {pick: post._id}">
          <i class="fal fa-bars"></i>
        </a>
      </div>
      <div class="top-left content">
        <a if.bind="player.playlist" class="button" href="#posts/${player.playlist._id}">
          <i class="fal fa-music"></i>
        </a>
      </div>
      <section class="cover-section">
        <div class="grid">
          <div class="cover">
            <div class="cover-frame">
              <div class="cover-image" css="background: url(${post.image}) 50% 50% / cover no-repeat;"></div>
            </div>
            <div class="cover-frame shadow">
              <div class="cover-image" css="background: url(${post.image}) 50% 50% / cover no-repeat;"></div>
            </div>
          </div>
          <div class="title">
            <h1>${post.headline}</h1>
            <h2>
              <span repeat.for="category of post.categories">${category}</span>
            </h2>
          </div>
        </div>
        <footer class="cover-footer">
          <player post.bind="post" class="player"></player>
        </footer>
      </section>
      <section class="playlist-section content">
        <tracklist mix.bind="post"></tracklist>
      </section>
      <section class="content-section post-content">
        <section class="excerpt content-section">
          <p>${post.description}</p>
        </section>
        <showdown markdown.bind="post.text"></showdown>
      </section>
    </main>
  </div>
</template>
