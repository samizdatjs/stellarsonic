<template>
  <require from="components/player"></require>
  <require from="components/tracklist"></require>
  <require from="components/blog-post"></require>
  <require from="components/disqus"></require>
  <require from="styles/app.styl"></require>
  <require from="styles/post.styl"></require>
  <require from="styles/article.styl"></require>
  <require from="styles/volume.styl"></require>
  <require from="styles/post-edit.styl"></require>

  <blog-post class="au-animate" 
    color.bind="post.palette.dark"
    bg-color.bind="post.palette.primary"
    bg-image.bind="post.image"
    toggle-edit.call="toggleEdit()" 
    edit.bind="edit"
  >
    <h1 slot="title">
      <span if.bind="!edit">${post.headline}</span>
      <input if.bind="edit" value.bind="post.headline" class="headline-edit">
    </h1>

    <section slot="cover-main">
      <div show.bind="edit" class="edit-button-group">
        <div class="dropdown">
          <a class="edit-button" href="">
            <i class="far fa-image"></i>
          </a>
          <div class="dropdown-content">
            <label for="cover-image">Cover image</label>
            <input id="cover-image" type="text" value.bind="post.image" style="width: 600px"/>
          </div>
        </div>
        <div class="dropdown">
          <a class="edit-button" href="">
            <i class="fas fa-palette"></i>
          </a>
          <div class="dropdown-content" style="width: 200px">
            <label for="background-color">Background color</label><br/>
            <input id="background-color" type="color" value.bind="post.palette.primary"/><br/>
            <label for="cover-color">Cover color</label><br/>
            <input id="cover-color" type="color" value.bind="post.palette.dark"/><br/>
          </div>
        </div>
        <a class="edit-button" href=""><i class="fal fa-album-collection"></i></a>
      </div>
      <div class="cover-image" style="position: relative;">
        <img src.bind="post.image" class="blend-bottom">
      </div>
      <div class="content cover-content">
        <player playlist.bind="post"></player>
      </div>
      <div class="content">
        <div class="info">
          <a href.bind="post.audio.contentUrl">
            <i class="fal fa-download"></i> Download
          </a>
        </div>
      </div>
    </section>

    <section slot="cover-side">
      <tracklist slot="side" playlist.bind="post"></tracklist>
    </section>

    <section slot="content-main">
      <div class="excerpt">
        <p>${post.description}</p>
      </div>
      <article if.bind="!edit" innerhtml.bind="post.text"></article>
      <textarea show.bind="edit" id="editor">Hello Something</textarea>
    </section>
            
    <section slot="content-side">
      <disqus identifier.bind="post._id" url.bind="url" title.bind="post.headline"></disqus>
    </section>
  </blog-post>

  </div>
</template>
